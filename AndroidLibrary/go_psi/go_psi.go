// Package go_psi is an autogenerated binder stub for package psi.
//   gobind -lang=go github.com/Psiphon-Labs/psiphon-tunnel-core/AndroidLibrary/psi
//
// File is generated by gobind. Do not edit.
package go_psi

import (
	"github.com/Psiphon-Labs/psiphon-tunnel-core/AndroidLibrary/psi"
	"golang.org/x/mobile/bind/seq"
)

const (
	proxyListenerDescriptor  = "go.psi.Listener"
	proxyListenerMessageCode = 0x10a
)

type proxyListener seq.Ref

func (p *proxyListener) Message(message string) {
	out := new(seq.Buffer)
	out.WriteUTF16(message)
	seq.Transact((*seq.Ref)(p), proxyListenerMessageCode, out)
}

func proxy_Start(out, in *seq.Buffer) {
	param_configJson := in.ReadUTF16()
	var param_listener psi.Listener
	param_listener_ref := in.ReadRef()
	if param_listener_ref.Num < 0 {
		param_listener = param_listener_ref.Get().(psi.Listener)
	} else {
		param_listener = (*proxyListener)(param_listener_ref)
	}
	err := psi.Start(param_configJson, param_listener)
	if err == nil {
		out.WriteUTF16("")
	} else {
		out.WriteUTF16(err.Error())
	}
}

func proxy_Stop(out, in *seq.Buffer) {
	psi.Stop()
}

func init() {
	seq.Register("psi", 1, proxy_Start)
	seq.Register("psi", 2, proxy_Stop)
}
